<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Doofenshmirtz Evil Incorporated - City Simulator: WebSocketNotifier Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Doofenshmirtz Evil Incorporated - City Simulator
   </div>
   <div id="projectbrief">The City Builder Simulation is a C++ project where users manage and develop various aspects of an evolving city. The simulation balances resources, infrastructure, and the needs of citizens while demonstrating principles of software design, such as scalability, flexibility, and maintainability.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classWebSocketNotifier-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">WebSocketNotifier Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Singleton class for logging messages through WebSocket.  
 <a href="classWebSocketNotifier.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="WebSocketNotifier_8h_source.html">WebSocketNotifier.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for WebSocketNotifier:</div>
<div class="dyncontent">
<div class="center"><img src="classWebSocketNotifier__inherit__graph.png" border="0" usemap="#aWebSocketNotifier_inherit__map" alt="Inheritance graph"/></div>
<map name="aWebSocketNotifier_inherit__map" id="aWebSocketNotifier_inherit__map">
<area shape="rect" title="Singleton class for logging messages through WebSocket." alt="" coords="54,95,195,121"/>
<area shape="rect" title=" " alt="" coords="5,5,244,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for WebSocketNotifier:</div>
<div class="dyncontent">
<div class="center"><img src="classWebSocketNotifier__coll__graph.png" border="0" usemap="#aWebSocketNotifier_coll__map" alt="Collaboration graph"/></div>
<map name="aWebSocketNotifier_coll__map" id="aWebSocketNotifier_coll__map">
<area shape="rect" title="Singleton class for logging messages through WebSocket." alt="" coords="54,95,195,121"/>
<area shape="rect" title=" " alt="" coords="5,5,244,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a883544bc62ba5d708e898fc0daeb2a84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWebSocketNotifier.html#a883544bc62ba5d708e898fc0daeb2a84">log</a> (const nlohmann::json &amp;message)</td></tr>
<tr class="memdesc:a883544bc62ba5d708e898fc0daeb2a84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log a JSON message through the WebSocket server.  <a href="classWebSocketNotifier.html#a883544bc62ba5d708e898fc0daeb2a84">More...</a><br /></td></tr>
<tr class="separator:a883544bc62ba5d708e898fc0daeb2a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70baac7023d1de7031b75f079a6d85ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWebSocketNotifier.html#a70baac7023d1de7031b75f079a6d85ad">setServer</a> (std::shared_ptr&lt; <a class="el" href="classServer.html">Server</a> &gt; server)</td></tr>
<tr class="memdesc:a70baac7023d1de7031b75f079a6d85ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the WebSocket server instance.  <a href="classWebSocketNotifier.html#a70baac7023d1de7031b75f079a6d85ad">More...</a><br /></td></tr>
<tr class="separator:a70baac7023d1de7031b75f079a6d85ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Singleton class for logging messages through WebSocket. </p>
<p>This class implements the Singleton pattern using boost::serialization::singleton to provide a global point of access for sending messages through a WebSocket server. It acts as a bridge between various parts of the application and the WebSocket server, allowing components to send messages without direct coupling to the server.</p>
<dl class="section note"><dt>Note</dt><dd>This class is thread-safe as long as setServer is not called while log operations are in progress</dd></dl>
<p>Usage example: </p><div class="fragment"><div class="line">WebSocketNotifier::get_mutable_instance().log({<span class="stringliteral">&quot;type&quot;</span>: <span class="stringliteral">&quot;status&quot;</span>, <span class="stringliteral">&quot;data&quot;</span>: <span class="stringliteral">&quot;message&quot;</span>});</div>
</div><!-- fragment --> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a883544bc62ba5d708e898fc0daeb2a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a883544bc62ba5d708e898fc0daeb2a84">&#9670;&nbsp;</a></span>log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WebSocketNotifier::log </td>
          <td>(</td>
          <td class="paramtype">const nlohmann::json &amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log a JSON message through the WebSocket server. </p>
<p>Implementation of JSON message logging.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>JSON object to be sent through the WebSocket</td></tr>
  </table>
  </dd>
</dl>
<p>If a server has been set, this method will forward the message to the server's write method. If no server is set, the message will be silently dropped.</p>
<dl class="section note"><dt>Note</dt><dd>This method is thread-safe with respect to message sending, but not with respect to server configuration changes</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classServer.html#ad81573c94aca3996029ae9a7de064ee2" title="Send a JSON message to the connected client.">Server::write()</a> for details on message transmission</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The JSON message to be logged/sent through the WebSocket</td></tr>
  </table>
  </dd>
</dl>
<p>Checks if a valid server instance exists and forwards the message to that server's write method. If no server is configured, the message will be silently dropped.</p>
<dl class="section note"><dt>Note</dt><dd>This implementation maintains the strong exception guarantee - if the server write fails, the <a class="el" href="classWebSocketNotifier.html" title="Singleton class for logging messages through WebSocket.">WebSocketNotifier</a> remains in its original state </dd></dl>

</div>
</div>
<a id="a70baac7023d1de7031b75f079a6d85ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70baac7023d1de7031b75f079a6d85ad">&#9670;&nbsp;</a></span>setServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WebSocketNotifier::setServer </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classServer.html">Server</a> &gt;&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the WebSocket server instance. </p>
<p>Implementation of server configuration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Shared pointer to the <a class="el" href="classServer.html" title="WebSocket server class that handles client connections and message processing.">Server</a> instance that will handle message transmission</td></tr>
  </table>
  </dd>
</dl>
<p>Updates the internal server pointer to the provided instance. This allows the notifier to be configured with different server instances at runtime.</p>
<dl class="section warning"><dt>Warning</dt><dd>This method is not thread-safe with respect to concurrent log operations. Ensure proper synchronization when changing the server while the system is active.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>Shared pointer to the <a class="el" href="classServer.html" title="WebSocket server class that handles client connections and message processing.">Server</a> instance to be used for message transmission</td></tr>
  </table>
  </dd>
</dl>
<p>Updates the internal server pointer with the provided instance. The shared_ptr ensures proper memory management of the server instance.</p>
<dl class="section warning"><dt>Warning</dt><dd>This method should not be called while log operations are in progress as it's not thread-safe with respect to logging </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="WebSocketNotifier_8h_source.html">WebSocketNotifier.h</a></li>
<li><a class="el" href="WebSocketNotifier_8cpp.html">WebSocketNotifier.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
